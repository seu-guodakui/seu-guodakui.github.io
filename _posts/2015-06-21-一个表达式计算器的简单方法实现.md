---
layout: post
title: "简单方法实现一个表达式计算器"
categories:
- 算法
tags: 算法 字符串

---

简单方法实现一个表达式计算器，先来看一个典型的表达式

	4*(3*(8+2))/2+3

主要问题在于怎么处理各种嵌套，还有优先级问题。

先来看一般人是怎么计算的

我们先把8+2算出来是10，并且用10替换原来的8+2 ：

	4*(3*(10))/2+3
	
再把`3*(10)`计算出来，并且用30替换原来的`3*(10)`：

。。。。。。


计算机也一样，只要把最简单的可计算表达式，3-1,5+2之类的东西计算出来，然后替换原来的表达式，构成一个新表达式，再用相同的方法处理新表达式，不断进行下去，直到结果是一个数字，计算完成。  
如果要支持函数，也是一样的，无论嵌套情况如何，总有最简单的算术运算或者最简单的函数运算，只要算出来并且替换就可以了。 
该方法简单之处在于，只要学了数组，字符串这些基础知识就可以实现，并不需要递归、栈、正则表达式之类的东西。   
一次处理的完整过程像这样：

+  找到最左的一个操作符或者函数
+  判断该操作符或函数对应的子表达式是否最简
+  不是最简则找下一个操作符或函数
+  是最简则进行计算，并使用计算结果替换原子表达式位置

一个c语言实现<https://github.com/veekxt/exp_calculator>
