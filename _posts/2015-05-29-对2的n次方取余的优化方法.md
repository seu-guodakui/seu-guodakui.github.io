---
layout: post
title: "对2的n次方取余的优化方法"
categories:
- 算法
tags: 算法 c语言


---

看了线性同余法之后，教程说道，对2的n次方取余可以用位运算来实现，结论是：
>
m % 2^n == m & (2^n-1)

为什么呢？举个例子就很容易理解了，先考虑一个简单的事实：对2^n取余时，余数就是除数的最后几位，一个例子,1110110110110 % 100000 (二进制)，写成右对齐：
>
0001110110110110  
0000000000100000

除法的本质是减法，看上面的例子，很容易看出上面的数一直减下面的数，最终剩余的几位就10110，实际上这个例子在十进制中更自然，比如12345 % 10^2==45,这不也是分离高位和低位的方法吗！对于16位寄存器B,B\_h=B/(2^8),B\_l=B%(2^8)。那么现在问题就转化为了如何取最后几位，一个方法就是让上面的数和111111进行位与，发现了吧，它正好是100000（2^5）减一，于是上面的结论就显而易见了。  
