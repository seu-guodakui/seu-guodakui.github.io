---
layout: post
title: "C语言中无符号类型的“陷阱”"
categories:
- c语言
tags:
- c语言
- 陷阱


---

被无符号类型坑了好几次了，但是实际上还是因为自己不了解或者错误的使用。语言本身没什么问题。

### 无符号型恒大于0

这不是废话吗，但是我还是写过类似于下面的代码：

	unsigned int num;
	//...
	for(...;num>0;...)
	{...}
	
这真是太蠢了，但是有些时候可能意识不到：

	unsigned int num;
	//...
	for(...;num > 5;num=num-7)
	{...}
即使写的不是`>0`的形式，想象一下当num<7,可能会出现异常，不过这实际上是溢出的问题了。

### 无符号型与其他类型运算

无符号类型与其他类型运算时，会全部转换为无符号类型运算，不熟悉这点的很容易被坑，比如下面的代码：

	unsigned int num = 10;
	int a_int = -10;
	if(a_int > num)puts("-10 > 10");
	printf( "%d",a_int / num );
产生的一个输出是：  
>-10 \> 10  
10429496728

